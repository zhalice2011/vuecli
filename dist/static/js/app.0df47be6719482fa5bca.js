webpackJsonp([1],[,,,,,,,,,,function(t,e,i){"use strict";var o=i(2),n=i(53),a=i(48),s=i.n(a),l=i(47),r=i.n(l);o.default.use(n.a),e.a=new n.a({routes:[{path:"/",name:"List",component:s.a},{path:"/movie/:title",name:"detail",component:r.a},{path:"*",redirect:"/"}]})},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,function(t,e,i){i(44);var o=i(1)(i(36),i(52),null,null);t.exports=o.exports},function(t,e,i){i(41);var o=i(1)(i(37),i(49),null,null);t.exports=o.exports},,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"vodal",props:{show:{type:Boolean,required:!0},width:{type:Number,default:400},height:{type:Number,default:240},duration:{type:Number,default:300},measure:{type:String,default:"px"},animation:{type:String,default:"zoom"},mask:{type:Boolean,default:!0},closeButton:{type:Boolean,default:!0},className:{type:String,default:""}},computed:{style:function(){return"\n                animationDuration: "+this.duration+"ms;\n                webkitAnimationDuration: "+this.duration+"ms;\n            "},dialogStyle:function(){return"\n                width: "+(this.width+this.measure)+";\n                height: "+(this.height+this.measure)+";\n                "+this.style+"\n            "}},methods:{onEsc:function(){this.show&&this.$emit("hide")}},watch:{show:function(t){var e=this;t&&this.$nextTick(function(){e.$el.focus()})}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app",data:function(){return{title:"电影列表",zDepth:2}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={created:function(){this.getMovie(this.$route.params.title),document.title=this.$route.name},data:function(){return{movie:{},loadingData:!0}},methods:{goBack:function(){this.$router.go(-1)},getMovie:function(t){var e=this;this.$http.get("https://bird.ioliu.cn/v1/?url=http://api.douban.com/v2/movie/search?q="+t).then(function(t){console.log(t.data);var i=t.data.subjects[0].id;i&&e.$http.get("https://bird.ioliu.cn/v1/?url=http://api.douban.com/v2/movie/subject/"+i).then(function(t){console.dir(t.data),t.data&&(e.movie=t.data,setTimeout(function(){document.querySelector(".movie-poster").src=e.movie.images.large},0),e.loadingData=!1)}).catch(function(t){return console.log(t)})}).catch(function(t){return console.log(t)})}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={created:function(){this.getMovies(),document.title=this.$route.name},components:{},data:function(){return{title:"",poster:"",rating:null,introduction:"",movie_id:"",movies:[],addMovieModal:!1,editMovieModal:!1}},methods:{getMovies:function(){var t=this;this.$http.get("/api/movie").then(function(e){console.dir(e.data),t.movies=e.data}).catch(function(e){t.toastr.error(""+e.message,"ERROR!"),console.log(e)})},openAddMovieModal:function(){this.addMovieModal=!0},openEditMovieModal:function(t){this.editMovieModal=!0,this.title=t.title,this.rating=t.rating,this.introduction=t.introduction,this.poster=t.poster,this.movie_id=t._id},closeModal:function(){this.addMovieModal=!1,this.editMovieModal=!1,this.title="",this.rating=null,this.poster="",this.introduction="",this.movie_id=""},addMovie:function(){var t=this;this.$http.post("/api/movie",{title:this.title,poster:this.poster,introduction:this.introduction,rating:this.rating}).then(function(e){t.toastr.success("添加电影成功"),console.log(e.data),t.addMovieModal=!1,t.title="",t.rating=null,t.poster="",t.introduction="",t.movie_id="",t.getMovies()}).catch(function(e){t.toastr.warn("保存失败!"),console.log(e)})},cancelAddMovie:function(){this.addMovieModal=!1,this.title="",this.rating=0,this.poster="",this.introduction=""},editMovie:function(){var t=this,e=this.movie_id;this.$http.put("/api/movie/"+e,{title:this.title,poster:this.poster,introduction:this.introduction,rating:this.rating}).then(function(e){t.toastr.success("更新电影成功!"),t.closeModal(),t.getMovies(),t.title="",t.rating=null,t.poster="",t.introduction="",t.movie_id=""}).catch(function(t){return console.log(t)})},removeMovie:function(t){var e=this,i=t._id;this.$http.delete("/api/movie/"+i).then(function(t){e.toastr.success("删除成功."),console.log(t.data),e.getMovies()}).catch(function(t){return console.log(t)})},showDetail:function(t){this.$router.push("/movie/"+t)}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=i(18),a=i.n(n),s=i(16),l=i.n(s),r=i(15),u=i.n(r),c=i(17),d=i.n(c),v=i(9),m=i.n(v),h=i(10),f=i(12),p=(i.n(f),i(11)),_=(i.n(p),i(14)),g=(i.n(_),i(13));i.n(g);o.default.use(u.a),o.default.prototype.$http=m.a,o.default.prototype.toastr=l.a,o.default.component(d.a.name,d.a),l.a.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},o.default.filter("castsToString",function(t){return t.map(function(t){return t.name})}),new o.default({created:function(){l.a.success("启动成功!")},router:h.a,render:function(t){return t(a.a)}}).$mount("#app")},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,function(t,e,i){i(43);var o=i(1)(i(38),i(51),"data-v-3f4a6300",null);t.exports=o.exports},function(t,e,i){i(42);var o=i(1)(i(39),i(50),null,null);t.exports=o.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("mu-appbar",{staticClass:"title",attrs:{title:t.title,zDepth:t.zDepth}},[i("mu-icon-button",{staticClass:"github-icon",attrs:{href:"https://github.com/xrr2016/vue-express-mongodb",target:"blank"},slot:"right"},[i("svg",{attrs:{"aria-hidden":"true",fill:"#f4f4f4",height:"24",viewBox:"0 0 16 16",width:"24"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"}})])])],1),t._v(" "),i("router-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list"},[i("mu-table",{attrs:{fixedHeader:!0,showCheckbox:!1}},[i("mu-thead",[i("mu-tr",[i("mu-th",[t._v("电影海报")]),t._v(" "),i("mu-th",[t._v("电影名称")]),t._v(" "),i("mu-th",[t._v("简介")]),t._v(" "),i("mu-th",[t._v("评分")]),t._v(" "),i("mu-th",[t._v("操作")])],1)],1),t._v(" "),i("mu-tbody",t._l(t.movies,function(e){return i("mu-tr",[i("mu-td",[i("img",{staticClass:"movie-poster",attrs:{src:e.poster}})]),t._v(" "),i("mu-td",[i("h3",[t._v(t._s(e.title))])]),t._v(" "),i("mu-td",[i("p",{staticClass:"movie-introduction"},[t._v(t._s(e.introduction))])]),t._v(" "),i("mu-td",{staticClass:"movie-rating"},[t._v(t._s(e.rating))]),t._v(" "),i("mu-td",[i("mu-raised-button",{attrs:{label:"详细",primary:""},on:{click:function(i){t.showDetail(e.title)}}}),t._v(" "),i("mu-raised-button",{attrs:{label:"修改",primary:""},on:{click:function(i){t.openEditMovieModal(e)}}}),t._v(" "),i("mu-raised-button",{attrs:{label:"删除",secondary:""},on:{click:function(i){t.removeMovie(e)}}})],1)],1)}))],1),t._v(" "),i("mu-float-button",{staticClass:"add-movie-button",attrs:{icon:"add",backgroundColor:""},on:{click:t.openAddMovieModal}}),t._v(" "),i("vodal",{attrs:{show:t.addMovieModal,animation:"slideDown",width:500,height:480,closeButton:!1}},[i("mu-text-field",{attrs:{fullWidth:"",icon:"movie",label:"电影名称",labelFloat:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),i("br"),t._v(" "),i("mu-text-field",{attrs:{fullWidth:"",icon:"picture_in_picture",label:"海报地址",labelFloat:""},model:{value:t.poster,callback:function(e){t.poster=e},expression:"poster"}}),i("br"),t._v(" "),i("mu-text-field",{attrs:{multiLine:"",rows:2,rowsMax:6,fullWidth:"",icon:"description",label:"简介",labelFloat:""},model:{value:t.introduction,callback:function(e){t.introduction=e},expression:"introduction"}}),i("br"),t._v(" "),i("mu-text-field",{attrs:{fullWidth:"",icon:"star",label:"评分",labelFloat:""},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}}),i("br"),t._v(" "),i("mu-raised-button",{attrs:{label:"取消",icon:"undo"},on:{click:t.closeModal}}),t._v(" "),i("mu-raised-button",{attrs:{label:"确定",icon:"check",primary:""},on:{click:t.addMovie}})],1),t._v(" "),i("vodal",{attrs:{show:t.editMovieModal,animation:"slideDown",width:500,height:480,closeButton:!1}},[i("mu-text-field",{attrs:{fullWidth:"",icon:"movie",label:"电影名称",labelFloat:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),i("br"),t._v(" "),i("mu-text-field",{attrs:{fullWidth:"",icon:"picture_in_picture",label:"海报地址",labelFloat:""},model:{value:t.poster,callback:function(e){t.poster=e},expression:"poster"}}),i("br"),t._v(" "),i("mu-text-field",{attrs:{multiLine:"",rows:2,rowsMax:6,fullWidth:"",icon:"description",label:"简介",labelFloat:""},model:{value:t.introduction,callback:function(e){t.introduction=e},expression:"introduction"}}),i("br"),t._v(" "),i("mu-text-field",{attrs:{fullWidth:"",icon:"star",label:"评分",labelFloat:""},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}}),i("br"),t._v(" "),i("mu-raised-button",{attrs:{label:"取消",icon:"undo"},on:{click:t.closeModal}}),t._v(" "),i("mu-raised-button",{attrs:{label:"确定",icon:"check",primary:""},on:{click:t.editMovie}})],1)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.loadingData?i("mu-circular-progress",{staticClass:"loading",attrs:{size:80}}):i("div",{staticClass:"detail"},[i("div",{staticClass:"detail-left"},[i("img",{staticClass:"movie-poster"})]),t._v(" "),i("div",{staticClass:"detail-right"},[i("p",{staticClass:"movie-title"},[t._v(t._s(t.movie.title)+" "),i("span",[t._v(t._s(t.movie.original_title))])]),t._v(" "),i("p",{staticClass:"movie-akas"},[t._v("别名:"),t._l(t.movie.aka,function(e){return i("span",{staticClass:"movie-aka"},[t._v(t._s(e))])})],2),t._v(" "),i("p",{staticClass:"movie-genres"},[t._v("\n            "+t._s(t.movie.countries.join(""))+" ("+t._s(t.movie.year)+")\n            "),t._l(t.movie.genres,function(e){return i("span",{staticClass:"movie-genre"},[t._v(t._s(e))])}),t._v("\n            评分: "+t._s(t.movie.rating.average)+"\n          ")],2),t._v(" "),i("p",{staticClass:"movie-directors"},[t._v("导演:"),t._l(t.movie.directors,function(e){return i("a",{attrs:{href:e.alt}},[t._v(t._s(e.name))])})],2),t._v(" "),i("p",{staticClass:"movie-actors"},[t._v("\n            演员: "),t._l(t.movie.casts,function(e){return i("a",{staticClass:"movie-actor",attrs:{href:e.alt}},[t._v(t._s(e.name))])})],2),t._v(" "),i("p",{staticClass:"movie-summary"},[t._v(t._s(t.movie.summary))]),t._v(" "),i("mu-raised-button",{attrs:{primary:""},on:{click:t.goBack}},[t._v("返回")])],1)])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"vodal-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],class:["vodal",t.className],style:t.style,attrs:{tabindex:"-1"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27))return null;t.onEsc(e)}}},[t.mask?i("div",{staticClass:"vodal-mask",on:{click:function(e){t.$emit("hide")}}}):t._e(),t._v(" "),i("transition",{attrs:{name:"vodal-"+t.animation}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"vodal-dialog",style:t.dialogStyle},[t.closeButton?i("span",{staticClass:"vodal-close",on:{click:function(e){t.$emit("hide")}}}):t._e(),t._v(" "),t._t("default")],2)])],1)])},staticRenderFns:[]}}],[40]);